{
  "name": "Payment",
  "type": "object",
  "properties": {
    "user_id": {
      "type": "string",
      "description": "User ID"
    },
    "amount": {
      "type": "number",
      "description": "Payment amount in INR"
    },
    "currency": {
      "type": "string",
      "default": "INR",
      "description": "Currency code"
    },
    "payment_method": {
      "type": "string",
      "enum": [
        "Card",
        "UPI",
        "Net Banking",
        "Wallet"
      ],
      "description": "Payment method"
    },
    "payment_gateway": {
      "type": "string",
      "enum": [
        "Razorpay",
        "PayU",
        "Paytm"
      ],
      "description": "Payment gateway used"
    },
    "transaction_id": {
      "type": "string",
      "description": "Gateway transaction ID"
    },
    "order_id": {
      "type": "string",
      "description": "Order reference ID"
    },
    "status": {
      "type": "string",
      "enum": [
        "Pending",
        "Success",
        "Failed",
        "Refunded"
      ],
      "default": "Pending",
      "description": "Payment status"
    },
    "service_type": {
      "type": "string",
      "enum": [
        "Consultation",
        "Document Service",
        "Courier",
        "Premium Feature"
      ],
      "description": "What service is being paid for"
    },
    "service_id": {
      "type": "string",
      "description": "Related service entity ID"
    },
    "payment_date": {
      "type": "string",
      "format": "date-time",
      "description": "Payment date and time"
    },
    "receipt_url": {
      "type": "string",
      "description": "Receipt download URL"
    }
  },
  "required": [
    "user_id",
    "amount",
    "service_type"
  ],
  "rls": {
    "create": {
      "user_id": "{{user.id}}"
    },
    "read": {
      "$or": [
        {
          "user_id": "{{user.id}}"
        },
        {
          "user_condition": {
            "role": "admin"
          }
        }
      ]
    },
    "update": {
      "user_condition": {
        "role": "admin"
      }
    },
    "delete": {
      "user_condition": {
        "role": "admin"
      }
    }
  }
}