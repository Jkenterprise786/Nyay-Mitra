{
  "name": "Consultation",
  "type": "object",
  "properties": {
    "user_id": {
      "type": "string",
      "description": "User ID"
    },
    "lawyer_id": {
      "type": "string",
      "description": "Lawyer ID"
    },
    "consultation_date": {
      "type": "string",
      "format": "date-time",
      "description": "Scheduled consultation date and time"
    },
    "mode": {
      "type": "string",
      "enum": [
        "In-Person",
        "Phone",
        "Video Call"
      ],
      "description": "Consultation mode"
    },
    "duration": {
      "type": "number",
      "description": "Duration in minutes"
    },
    "amount_paid": {
      "type": "number",
      "description": "Amount paid in INR"
    },
    "payment_status": {
      "type": "string",
      "enum": [
        "Pending",
        "Paid",
        "Refunded",
        "Failed"
      ],
      "default": "Pending",
      "description": "Payment status"
    },
    "status": {
      "type": "string",
      "enum": [
        "Scheduled",
        "Completed",
        "Cancelled",
        "No Show"
      ],
      "default": "Scheduled",
      "description": "Consultation status"
    },
    "issue_description": {
      "type": "string",
      "description": "Description of legal issue"
    },
    "notes": {
      "type": "string",
      "description": "Consultation notes"
    },
    "rating": {
      "type": "number",
      "description": "User rating (1-5)"
    },
    "review": {
      "type": "string",
      "description": "User review"
    },
    "meeting_link": {
      "type": "string",
      "description": "Video call link if applicable"
    }
  },
  "required": [
    "user_id",
    "lawyer_id",
    "consultation_date",
    "mode",
    "amount_paid"
  ],
  "rls": {
    "create": {
      "user_id": "{{user.id}}"
    },
    "read": {
      "$or": [
        {
          "user_id": "{{user.id}}"
        },
        {
          "lawyer_id": "{{user.id}}"
        },
        {
          "user_condition": {
            "role": "admin"
          }
        }
      ]
    },
    "update": {
      "$or": [
        {
          "user_id": "{{user.id}}"
        },
        {
          "lawyer_id": "{{user.id}}"
        },
        {
          "user_condition": {
            "role": "admin"
          }
        }
      ]
    },
    "delete": {
      "$or": [
        {
          "user_id": "{{user.id}}"
        },
        {
          "lawyer_id": "{{user.id}}"
        },
        {
          "user_condition": {
            "role": "admin"
          }
        }
      ]
    }
  }
}